<!-- markdownlint-disable -->

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L0"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

# <kbd>module</kbd> `transports`
This module provides utilities for representing and restructuring RFC 2822 and MIME email messages for storage and transport. 

**Global Variables**
---------------
- **FILE_EXTENTION**

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L258"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>function</kbd> `save_to_disk`

```python
save_to_disk(
    message: Union[bytes, str, list[Union[bytes, tuple[bytes, bytes]]]],
    filename: str,
    _class: type = <class 'email.message.EmailMessage'>
) → None
```

Disassemble and restructure message instance as a txt file. Attachments are saved on the same path —in a subdirectory. The message file and its subdirectory name will be the same. 



**Args:**
  message (Union[bytes, str]):  The message object to be saved.  filename (str):  It can also be a path.  _class (type[Union[EmailMessage, MIMEPart]], optional):  No-argument class from `email.message`. Defaults to  EmailMessage. 


---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L18"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

## <kbd>class</kbd> `TransportUtils`
Class containing methods for handling message objects. 




---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L192"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `create_directory`

```python
create_directory(
    dirname: Union[Path, str],
    parents: bool = True,
    exist_ok: bool = True
) → None
```

Create a new directory in a given path. 



**Args:**
 
 - <b>`dirname`</b> (Union[Path, str]):  path segements a.k.a path-like string. 
 - <b>`parents`</b> (bool, optional):  Create parents if missing. Defaults to  True. 
 - <b>`exist_ok`</b> (bool, optional):  Ignore `FileExistsError`. Defaults to  True. 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L165"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `create_file`

```python
create_file(
    filename: Union[Path, str],
    content: Optional[str, bytes] = None
) → None
```

Create a file with the specified name and write its content. 



**Args:**
 
 - <b>`filename`</b> (Union[Path, str]):  The file name. 
 - <b>`content`</b> (Optional[Union[str, bytes]], optional):  The file content.  Defaults to None. 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L21"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `data_as_bytes`

```python
data_as_bytes(message: list) → bytes
```

Bring out bytes-like object from response data. 



**Args:**
 
 - <b>`message`</b> (_ResponseData):  IMAP FETCH Command response.  `_ResponseData` is generated by `imaplib.IMAP4` methods for  communicating with the mail server. 



**Raises:**
 
 - <b>`TypeError`</b>:  Raised if message is not equal to _ResponseData. 



**Returns:**
 
 - <b>`bytes`</b>:  Email message as bytes-like object. 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L47"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `read_message`

```python
read_message(
    message: Union[bytes, str, list[Union[bytes, tuple[bytes, bytes]]]],
    headersonly: bool = False,
    _class: type = <class 'email.message.EmailMessage'>,
    policy: EmailPolicy = EmailPolicy()
) → Union[EmailMessage, Message, MIMEPart, NoneType]
```

Parse message object. This is identical to `pragmail.utils.read_message()` except that it supports sequence of bytes-like objects instead of file-like objects. 



**Args:**
  message (Union[bytes, str, _ResponseData]):  The message instance.  headersonly (bool, optional):  Whether to stop parsing after reading the headers or not.  Defaults to False.  _class (type[Union[EmailMessage, MIMEPart]], optional):  No-argument callable. Defaults to EmailMessage. 
 - <b>`policy`</b> (EmailPolicy, optional):  Policy class with the approrate  policy methods. Defaults to `email.policy.default`. 



**Raises:**
 
 - <b>`TypeError`</b>:  If message instance is not either a string or a  bytes-like object. 



**Returns:**
 
 - <b>`Union[EmailMessage, Message, MIMEPart]`</b>:  Parsed message instance. 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L227"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `save_attachments`

```python
save_attachments(attachments: dict, dirpath: Union[Path, str] = '.') → None
```

Extract and save files attached to the email message. The files will be stored inside a subdirectory on the same path as the message file. 



**Args:**
 
 - <b>`attachments`</b> (dict[str, dict]):  Must be or similar to the  dictionary created by  `transports.MessageStructure.xtract_attachments()`. 
 - <b>`dirpath`</b> (Union[Path, str]):  Path where the file will be saved.  Defaults to ".". 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L214"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `write_to_file`

```python
write_to_file(filname: str, data: Any, mode: str = 'w')
```

Write binary or text. 



**Args:**
 
 - <b>`filname`</b> (str):  The file name. May be path segements. 
 - <b>`data`</b> (Any):  The file data to write. 
 - <b>`mode`</b> (str, optional):  The mode in which the file is opened.  Defaults to "w". 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L101"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `xtract_attachments`

```python
xtract_attachments(
    message: Union[EmailMessage, MIMEPart],
    decode: bool = False
) → dict[str, dict]
```

Extract message attachment. 



**Args:**
 
 - <b>`message`</b> (Union[EmailMessage, MIMEPart]):  The message instance. 
 - <b>`decode`</b> (bool, optional):  Whether the message should be decoded or  not. Defaults to False. 



**Returns:**
 
 - <b>`dict[str, dict]`</b>:  A dictionary containing the content-type, file  name, and attachment data. 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L133"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `xtract_headers`

```python
xtract_headers(message: Message) → list[tuple[str, Any]]
```

Retrieve the message's header fields and values. 



**Args:**
 
 - <b>`message`</b> (Message):  The message object, which must be an instance  of `email.message.Message`. 



**Returns:**
 
 - <b>`list[tuple[str, Any]]`</b>:  Header fields and values sorted according  to the original message. 

---

<a href="https://github.com/hunique/pragmail/tree/main/pragmail/transports.py#L147"><img align="right" style="float:right;" src="https://img.shields.io/badge/-source-cccccc?style=flat-square"></a>

### <kbd>method</kbd> `xtract_payload`

```python
xtract_payload(
    message: Union[EmailMessage, MIMEPart],
    preferencelist: Sequence[str] = ('related', 'html', 'plain')
) → Optional[Message]
```

Extract message content. 



**Args:**
 
 - <b>`message`</b> (Union[EmailMessage, MIMEPart]):  The message instance. 
 - <b>`preferencelist`</b> (Sequence[str], optional):  The content-type to  extract. Defaults to ("related", "html", "plain"). 



**Returns:**
 
 - <b>`Union[Message, None]`</b>:  The message payload or None if it doesn't  exist. 




---

_This file was automatically generated via [lazydocs](https://github.com/ml-tooling/lazydocs)._
